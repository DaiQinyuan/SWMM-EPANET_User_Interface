<HTML><HEAD><TITLE>Parcel Tracking Algorithm</TITLE><META NAME="GENERATOR" CONTENT="ForeHTML Pro 2.0">
<STYLE TYPE="text/css"><!-- 

     .BannerBase { font-size: 12pt ; font-weight: bold; margin: 5pt  0pt  5pt  0pt ; font-family: Arial,sans-serif;  }
     .Base { font-size: 10pt ; margin: 6pt  0pt  0pt  0pt ; font-family: Arial,sans-serif;  }
     .Base1 { font-size: 10pt ; margin: 6pt  0pt  0pt  0pt ; font-family: Arial,sans-serif;  }
     .BodyText2 { font-size: 12pt ; margin: 0pt  36pt  0pt  36pt ; font-family: Times New Roman,serif;  }
     .BodyText21 { font-size: 12pt ; margin: 0pt  36pt  0pt  36pt ; font-family: Times New Roman,serif;  }
     .Bullet1 { font-size: 10pt ; font-family: Arial,sans-serif;  }
     .Bullet2 { font-size: 10pt ; margin: 6pt  18pt  0pt  18pt ; text-indent: -18pt ; font-family: Arial,sans-serif;  }
     .Bullet3 { font-size: 10pt ; margin: 6pt  18pt  0pt  18pt ; text-indent: -18pt ; font-family: Arial,sans-serif;  }
     .Bullet4 { font-size: 10pt ; font-family: Arial,sans-serif;  }
     .Bullet5 { font-size: 10pt ; font-family: Arial,sans-serif;  }
     .ButtonBar { font-size: 6pt ; font-weight: bold; margin: 5pt  -0.1in  5pt  -0.1in ; font-family: Arial,sans-serif;  }
     .HeadingBase { font-size: 11pt ; margin: 7pt  0pt  0pt  0pt ; line-height: 11pt ; font-family: Arial,sans-serif;  }
     .HeadingBase1 { font-size: 11pt ; margin: 7pt  0pt  0pt  0pt ; line-height: 11pt ; font-family: Arial,sans-serif;  }
     .HTMLBASE { font-size: 12pt ; margin: 0pt  1px  0pt  0pt ; font-family: Times New Roman,serif;  }
     BODY { margin: 0pt  1px  0pt  0pt ;  }
     .Indented { font-size: 10pt ; margin: 6pt  18pt  0pt  18pt ; font-family: Arial,sans-serif;  }
     .List { font-size: 11pt ; margin: 0pt  18pt  0pt  18pt ; text-indent: -18pt ; font-family: Times New Roman,serif;  }
     .ListBullet { font-size: 11pt ; margin: 6pt  90pt  0pt  90pt ; text-indent: -18pt ; font-family: Times New Roman,serif;  }
     .ListBullet1 { font-size: 11pt ; margin: 6pt  90pt  0pt  90pt ; text-indent: -18pt ; font-family: Times New Roman,serif;  }
     .ListNumber { font-size: 11pt ; margin: 6pt  90pt  0pt  90pt ; text-indent: -18pt ; font-family: Times New Roman,serif;  }
     .ListNumber1 { font-size: 11pt ; margin: 6pt  90pt  0pt  90pt ; text-indent: -18pt ; font-family: Times New Roman,serif;  }
     .List1 { font-size: 11pt ; margin: 0pt  18pt  0pt  18pt ; text-indent: -18pt ; font-family: Times New Roman,serif;  }
     .Normal { font-size: 12pt ; margin: 0pt  1px  0pt  0pt ; font-family: Times New Roman,serif;  }
     .Normal1 { font-size: 12pt ; margin: 0pt  1px  0pt  0pt ; font-family: Times New Roman,serif;  }
     .Number1 { font-size: 10pt ; font-family: Arial,sans-serif;  }
     .Number2 { font-size: 10pt ; font-family: Arial,sans-serif;  }
     .Number3 { font-size: 10pt ; font-family: Arial,sans-serif;  }
     .Number4 { font-size: 10pt ; font-family: Arial,sans-serif;  }
     .Number5 { font-size: 10pt ; font-family: Arial,sans-serif;  }

--></STYLE>
</HEAD>

<BODY BGPROPERTIES=FIXED>
<!--ForeHelp.Banner-->

<P CLASS="BannerBase">
<SPAN  STYLE="color: #0000ff; ">Parcel Tracking Algorithm</SPAN></P><!--ForeHelp.Ignore--><HR><!--ForeHelp.EndIgnore--><!--ForeHelp.EndBanner-->

<P CLASS="Base">
EPANET tracks the change in water quality of discrete parcels of water as they move along pipes and mix together at junctions between fixed-length time steps. The following actions occur at the end of each such time step:</P>
<OL STYLE="font-size: 10pt ; font-family: Arial,sans-serif; "><LI>
The water quality in each parcel is updated to reflect any reaction that may have occurred over the time step.</LI>
<LI>
The water from the leading parcels of pipes with flow into each junction is blended together, along with any external inflow to the junction, to compute a new water quality value at the junction. The volume contributed from each parcel equals the product of its pipe&#146;s flow rate and the time step. If this volume exceeds that of the leading parcel then the leading parcel is destroyed and the next parcel in line behind it begins to contribute its volume.</LI>
<LI>
New parcels are created in pipes with flow out of each junction. The parcel volume equals the product of the pipe flow and the time step. The parcel&#146;s water quality equals the new junction value computed in Step 2.</LI>
<P CLASS="Base">
To cut down on the number of parcels, Step 3 is only carried out if the new junction quality differs by a user-specified tolerance from that of the last parcel in the outflow pipe. If the difference in quality is below the tolerance then the size of the last parcel is simply increased by the volume of flow released into the pipe over the time step with no change in quality.</P>
<P CLASS="Base">
The updating of water quality in storage tanks receives special treatment (see <A HREF="Tank_Mix.htm">Tank Mixing Models</A>).</P>
<P CLASS="Base">
Initially each pipe in the network consists of a single parcel whose quality equals the initial quality assigned to the upstream node. Whenever there is a flow reversal in a pipe, the pipe&#146;s parcels are reordered from front to back.</P>
</BODY></HTML>
